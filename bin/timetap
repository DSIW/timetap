
if ARGV.include? '-f'
  go_foreground = true
  ARGV.shift
end

require 'time_tap'



# Try to replace "ruby" with "TimeTap" in the command string (for "ps -A" & co.)
$0 = 'TimeTap'

unless go_foreground
  require 'time_tap/daemon'
  
  pid = fork {
    Process.daemon(true)
    TimeTap.start
  }
else
  puts "going foreground"
  TimeTap.start
end
